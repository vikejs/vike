import { HookTypeScriptHints } from '../../components'
import { Link } from '@brillout/docpress'

Environment: build-time (Node.js/Bun/Deno)  
<Link href="/config#global">Global</Link>: true  
<Link href="/config#cumulative">Cumulative</Link>: false  

The `onPrerenderStart()` hook is called once when <Link href="/pre-rendering">pre-rendering</Link> starts.
It receives as argument an array of all <Link href="/pageContext">page contexts</Link> to be pre-rendered, and returns
a new array of page contexts, giving you a chance to add/remove/modify pages. This is usually used for
<Link href="/i18n">internationalization</Link>.

```js
export { onPrerenderStart }

async function onPrerenderStart(prerenderContext) {
  // new page contexts
  const pageContexts = []

  // for each original page context:
  prerenderContext.pageContexts.forEach((pageContext) => {
    // for each locale, push a new page context to pageContexts
    // ...
  })

  return {
    prerenderContext: {
      pageContexts
    }
  }
}
```


## TypeScript

```ts
export { onPrerenderStart }

import type { OnPrerenderStartAsync, PageContextServer } from 'vike/types'

const onPrerenderStart: OnPrerenderStartAsync = async (
  prerenderContext
): ReturnType<OnPrerenderStartAsync> => {
  // ...
}
```

<HookTypeScriptHints hookTypeName="OnPrerenderStartAsync" />

## See also

- <Link href="/pre-rendering" />
- <Link href="/hooks" />
