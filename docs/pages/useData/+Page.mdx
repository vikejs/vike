import { Link, RepoLink } from '@brillout/docpress'
import { UiFrameworkExtension, ConfigSpec, ProvidedBy } from '../../components'

<ConfigSpec
  env="client, server"
  providedBy={<ProvidedBy><code>useConfig()</code></ProvidedBy>}
  global={null}
/>

The `useData()` component hook allows you to access the value returned by the <Link href="/data">`data()` hook</Link>.

> See <Link href="/data-fetching" /> for an introduction about `useData()` and fetching data in general.

> You can also access the data over <Link href="/pageContext#data">`pageContext.data`</Link>. In fact <Link href="/usePageContext">`const { data } = usePageContext()`</Link> returns the same value as `useData()`.
>
> Using `pageContext.data` instead of `useData()` makes sense if you want to access the data in <Link href="/hooks">Vike hooks</Link> since `useData()` only works inside UI components (not inside Vike hooks).

For example:

```ts
// /pages/product/@id/SomeComponent.ts
// Environment: server & client

import { useData } from 'vike-react/useData' // or vike-vue / vike-solid
import type { Data } from './+data'

  // Inside a React/Vue/Solid component
  const data = useData<Data>()
  const { name, price } = data
```

```ts
// /pages/product/@id/+data.ts
// Environment: server

export { data }
export type Data = Awaited<ReturnType<typeof data>>

import type { PageContextServer } from 'vike/types'

async function data(pageContext: PageContextServer) {
  let product = await Product.findById(pagContext.routeParams.id)

  // `product` is serialized and passed to the client. Therefore, we pick only the
  // data the client needs in order to minimize what is sent over the network.
  product = { name: product.name, price: product.price }

  return product
}
```

Using type inference as shown above is usually what you want, but if you want to enforce a type instead:

```ts ts-only
// +data.ts

export { data }
export type { Data }

import type { PageContextServer } from 'vike/types'

type Data = /* the type you want to enforce */

function data(pageContext: PageContextServer): Promise<Data> {
  // ...
}
```


## Without `vike-{react,vue,solid}`

In case you don't use a <UiFrameworkExtension />, you can implement `useData()` yourself.

> In general, for improved DX, we recommend using a `useData()` implementation. But you don't have to as shown at <Link href="/data#without-vike-react-vue-solid" doNotInferSectionTitle />.

Examples:
 - <RepoLink path='/packages/create-vike-core/boilerplate-react/renderer/useData.js' /> (React + JavaScript)
 - <RepoLink path='/packages/create-vike-core/boilerplate-react-ts/renderer/useData.ts' /> (React + TypeScript)
 - <RepoLink path='/packages/create-vike-core/boilerplate-vue/renderer/useData.js' /> (Vue + JavaScript)
 - <RepoLink path='/packages/create-vike-core/boilerplate-vue-ts/renderer/useData.ts' /> (Vue + TypeScript)
 - [`vike-react` > /hooks/useData.tsx](https://github.com/vikejs/vike-react/blob/main/packages/vike-react/src/hooks/useData.tsx)
 - [`vike-vue` > /hooks/useData.ts](https://github.com/vikejs/vike-vue/blob/main/packages/vike-vue/src/hooks/useData.ts)
 - [`vike-solid` > /hooks/useData.tsx](https://github.com/vikejs/vike-solid/blob/main/vike-solid/hooks/useData.tsx)


## See also

- <Link href="/data-fetching" />
- <Link href="/data" />
- <Link href="/usePageContext" />
- <Link href="/pageContext#data">API > `pageContext.data`</Link>
